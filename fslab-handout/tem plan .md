## fs_statfs （目前工作）

基本写完，但是没有调试

### 遇到的问题

空闲和可用这两者有什么区别吗？

## touch (有bug)（已经此修复）

建立第二个目录之后，第二个目录中进行touch会出现错误

可能是mkdir的错误

或者是mknod的错误

**可能是目录挂载的时候出错了** 

**或者是建立文件写入的时候没有*申请*声明初始的datablock**

### 几个尝试

- 先创建了很多文件，再进入第一个文件夹，这个文件夹的中进行touch会出错

- 先创建了很多文件，再进入第一个文件夹，这个文件夹的中进行mkdir会出错

- 创建了两个文件夹，进入第二个之后创建文件夹和文件都会出错

- 创建第一个文件夹，再这一层中可以随意操作，但是再进一层之后则会出错

### 发现问题

可以申请空间，也可以写进去

但是之后找不到

之后读进去也可以找到，可能是

understanding file的问题？？

**最终定位到了understading the path**

### 最终解决方案

原本准备要对于understanding path 进行重构，

将understanding path阅读完成之后，发现是在解析路径的时候出现了一个参数的错误

这个参数的错误导致所有的搜寻都是在根目录上完成的

## fs_rename（告一段落）（但还有bug）

### 测试步骤

- 测试删除文件（测试过了）

- 测试删除目录（测试过了）

- 测试mv指令

### 已知问题

- rm之后ls会失败

  - rm -r之后什么都会没有    

- 实现之后再进行ls会失败

### 解决步骤

#### 调试 rm(已经完成)

rm在根目录下可以进行正常的删除

**现在已经确定可以正常的读取比较了** 

**错误在于将最后一个移动到被删除的位置的那一步操作，也就是line 1231**

##### 已经测试

在跟目录下进行删除空文件没有问题

 ![5cf5d98d3845190152](https://i.loli.net/2019/06/04/5cf5d98d3845190152.png)

但是会出现删除错误的情况???????????????????????????????????

程序迷惑行为

![5cf5da6b3d18b86884](https://i.loli.net/2019/06/04/5cf5da6b3d18b86884.png)

这部分功能已经完成

在非根目录下删除文件

在非根目录下删除非空的文件

在跟目录下删除非空的文件

#### 调试 rm -r

调试也已经完成

#### 调试mv（深层bug,wait调试）

![5cf5ed4568af038714](https://i.loli.net/2019/06/04/5cf5ed4568af038714.png)

进行move操作的时候没有把原来的文件写到新的路径中，反而是把目标目录reloadl了一次，十分迷惑

上述问题已经解决

![5cf5f32154e3239563](https://i.loli.net/2019/06/04/5cf5f32154e3239563.png)

**目前的问题式在更深层进行mv操作无法在新路径中挂载**

一层二层好像都可以，但是三层好像不行

## read&write（大文件不明）

### cp已经确认没有问题

### 大文件没有测试

没有测试大文件会如何

## 进度安排

优先进行调试touch中出现的bug

首先要确认是mkdir的问题还是mkmnd的问题

19/6/4 12:13 

对于mv对应的fs_rename函数进行调整

午休之后

- 先写那个新的函数

- 再新增fs_open的指令

- 再调整mv的bug

- 最后测试大文件的读写 

## fs_open

和fs_write配合增加一个新功能来调整append的方式进行写操作的状况
